define(["jquery","core/templates","core/ajax","core/notification","core/str"],function(a,b,c,d,e){var f=0,g=0,h=0,i=function(c,d){a('[data-region="manageplans"]').replaceWith(c),b.runTemplateJS(d)},j=function(a){b.render("tool_lp/plans_page",a).done(i).fail(d.exception)},k=function(){var b=a('[data-region="manageplans"]');h=b.attr("data-userid"),g=b.attr("data-status");var e=c.call([{methodname:"tool_lp_delete_plan",args:{id:f}},{methodname:"tool_lp_data_for_plans_page",args:{userid:h,status:g}}]);e[1].done(j).fail(d.exception)},l=function(b){b.preventDefault(),f=a(this).attr("data-planid");var g=c.call([{methodname:"tool_lp_read_plan",args:{id:f}}]);g[0].done(function(a){e.get_strings([{key:"confirm",component:"moodle"},{key:"deleteplan",component:"tool_lp",param:a.name},{key:"delete",component:"moodle"},{key:"cancel",component:"moodle"}]).done(function(a){d.confirm(a[0],a[1],a[2],a[3],k)}).fail(d.exception)}).fail(d.exception)};return{deleteHandler:l}});